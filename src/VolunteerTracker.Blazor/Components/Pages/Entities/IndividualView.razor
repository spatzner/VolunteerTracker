@using VolunteerTracker.Repository.Entities
@using VolunteerTracker.Repository
@using Microsoft.EntityFrameworkCore

<div class="px-2">
    <div class="row">
        <div class="col-md-1 pr-1">
            <label for="title" class="control-label">Title</label>
            <input id="title" type="text" class="form-control" @bind-value="_person.Title" />
        </div>
        <div class="col-md-3 pr-1">
            <label for="title" class="control-label">First Name</label>
            <input id="title" type="text" class="form-control" @bind-value="_person.FirstName" />
        </div>
        <div class="col-md-3 pr-1">
            <label for="title" class="control-label">Middle Name</label>
            <input id="title" type="text" class="form-control" @bind-value="_person.MiddleName" />
        </div>
        <div class="col-md-4 pr-1">
            <label for="title" class="control-label">Last Name</label>
            <input id="title" type="text" class="form-control" @bind-value="_person.LastName" />
        </div>
        <div class="col-md-1">
            <label for="title" class="control-label">Suffix</label>
            <input id="title" type="text" class="form-control" @bind-value="_person.Suffix" />
        </div>
    </div>
    <div class="row"></div>
    
</div>


@code {
    [Parameter]
    public required Guid PersonGuid { get; set; }

    [Inject]
    public required VolunteerContext Context { get; set; }

    private Person _person = new();

    protected override void OnInitialized()
    {
        _person = Context.Persons.Include(x => x.Emails).Include(x => x.Phones).Include(x => x.Address).FirstOrDefault(p => p.Id == PersonGuid) ?? new Person();

        base.OnInitialized();
    }
}
